<html>
<head>

<!--
Generated by:
https://github.com/pythonbyexample/PBE/tree/master/code/jstmovie.py
 -->

<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> -->
<script src="jquery-1.8.3.min.js" type="text/javascript"></script>
<script>

var commands = [];
commands.push( ["text", ['']] )

for (var x = 1; x<40; x++) {
    commands.push( ["type", ''] )
    commands.push( ["text", ["  line line line line line line line line line line line line line "+x, '']] )
    commands.push( ["pause", '1'] )
    commands.push( ["text", [" line "+x, '', '']] )
}

var commands     = [
    [
        "text",
        " "
    ],
    [
        "text",
        " "
    ],
    [
        "text",
        " Python strings let you store and manipulate text"
    ],
    [
        "text",
        " "
    ],
    [
        "pause",
        "5"
    ],
    [
        "text",
        " Let's make a simple string:"
    ],
    [
        "text",
        " "
    ],
    [
        "type",
        null
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;>>> s = \"Large space rock flies past Earth\""
    ],
    [
        "text",
        " "
    ],
    [
        "pause",
        "6"
    ],
    [
        "text",
        " You can count the number of characters:"
    ],
    [
        "text",
        " "
    ],
    [
        "type",
        null
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;>>> s.count('a')"
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;4"
    ],
    [
        "text",
        " "
    ],
    [
        "pause",
        "4"
    ],
    [
        "text",
        " You can check if a string ends with something or not:"
    ],
    [
        "text",
        " "
    ],
    [
        "type",
        null
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;>>> s.endswith(\"Earth\")"
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;True"
    ],
    [
        "text",
        " "
    ],
    [
        "type",
        null
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;>>> s.endswith(\"Mars\")"
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;False"
    ],
    [
        "text",
        " "
    ],
    [
        "pause",
        "4"
    ],
    [
        "text",
        " .. or starts with a substring:"
    ],
    [
        "text",
        " "
    ],
    [
        "type",
        null
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;>>> s.startswith(\"La\")"
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;True"
    ],
    [
        "text",
        " "
    ],
    [
        "pause",
        "4"
    ],
    [
        "text",
        " You can also find the location of a substring:"
    ],
    [
        "text",
        " "
    ],
    [
        "type",
        null
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;>>> s = \"Large space rock flies past Earth\""
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;>>> s.find('s')"
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;6"
    ],
    [
        "text",
        " "
    ],
    [
        "pause",
        "4"
    ],
    [
        "text",
        " If not found, -1 is returned:"
    ],
    [
        "text",
        " "
    ],
    [
        "type",
        null
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;>>> s.find('z')"
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;-1"
    ],
    [
        "text",
        " "
    ],
    [
        "pause",
        "4"
    ],
    [
        "text",
        " .. of course you can also find from right:"
    ],
    [
        "text",
        " "
    ],
    [
        "type",
        null
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;>>> s.rfind('a')"
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;29"
    ],
    [
        "text",
        " "
    ],
    [
        "pause",
        "4"
    ],
    [
        "text",
        " You can check if it's alphanumeric (False because we have spaces in our string):"
    ],
    [
        "text",
        " "
    ],
    [
        "type",
        null
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;>>> s.isalnum()"
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;False"
    ],
    [
        "text",
        " "
    ],
    [
        "pause",
        "4"
    ],
    [
        "text",
        " You can check if it's all lower case:"
    ],
    [
        "text",
        " "
    ],
    [
        "type",
        null
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;>>> s.islower()"
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;False"
    ],
    [
        "text",
        " "
    ],
    [
        "pause",
        "4"
    ],
    [
        "text",
        " .. or upper case:"
    ],
    [
        "text",
        " "
    ],
    [
        "type",
        null
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;>>> s.isupper()"
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;False"
    ],
    [
        "text",
        " "
    ],
    [
        "pause",
        "4"
    ],
    [
        "text",
        " .. or if all characters are printable:"
    ],
    [
        "text",
        " "
    ],
    [
        "type",
        null
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;>>> s.isprintable()"
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;True"
    ],
    [
        "text",
        " "
    ],
    [
        "pause",
        "4"
    ],
    [
        "text",
        " You can also convert to lowercase or uppercase:"
    ],
    [
        "text",
        " "
    ],
    [
        "type",
        null
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;>>> s.lower()"
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;'large space rock flies past earth'"
    ],
    [
        "text",
        " "
    ],
    [
        "pause",
        "4"
    ],
    [
        "text",
        " You can strip characters:"
    ],
    [
        "text",
        " "
    ],
    [
        "type",
        null
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;>>> \"abba is a swedish band\".lstrip('ab')"
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;' is a swedish band'"
    ],
    [
        "text",
        " "
    ],
    [
        "pause",
        "4"
    ],
    [
        "text",
        " (I've used a different string to demonstrate that multiple instances"
    ],
    [
        "text",
        " of given characters are stripped)"
    ],
    [
        "text",
        " "
    ],
    [
        "text",
        " One of the most useful methods is replace():"
    ],
    [
        "text",
        " "
    ],
    [
        "type",
        null
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;>>> s.replace(\"Large\", \"Small\")"
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;'Small space rock flies past Earth'"
    ],
    [
        "text",
        " "
    ],
    [
        "pause",
        "4"
    ],
    [
        "text",
        " Justifying is also very easy to do:"
    ],
    [
        "text",
        " "
    ],
    [
        "type",
        null
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;>>> s.ljust(50)"
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;'Large space rock flies past Earth&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '"
    ],
    [
        "text",
        " "
    ],
    [
        "type",
        null
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;>>> s.rjust(50)"
    ],
    [
        "text",
        " &nbsp;&nbsp;&nbsp;&nbsp;'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Large space rock flies past Earth'"
    ],
    [
        "text",
        " "
    ],
    [
        "pause",
        "4"
    ],
    [
        "text",
        " "
    ]
];

(function($, name) {
/* jQuery typewriter plugin
    2012-11-15
    https://github.com/bergus */
    $[name+"Defaults"] = {
        framerate: 2500/60,
        group: /.{0,2}/g // 2: Number of chars per frame
    };
    $.fn[name] = function(options, callback) {
        if (typeof options != 'object') callback=options, options={};

        return this.each(function() {
            var el = $(this),
                conf = $.extend({}, $[name+"Defaults"], options);
            el.queue("fx", function(next) {
                animateNode(this, conf, typeof callback == 'function'
                  ? function() { callback.call(el[0]); next(); }
                  : next
                );
                el.show();
            });
        });
    };
    function chunk(text, conf) {
        // splitting the text into parts (http://stackoverflow.com/a/11657799/1048572)
        return text.match(conf.group);
    }
    function timeout(callback, conf) {
        // set up the timeout
        // want to randomize? Have a look at http://jsfiddle.net/pZb8W/2/ for possible implementation
        setTimeout(callback, conf.framerate);
    }
    function animateNode(element, conf, callback) {
        var pieces = [];
        if (element.nodeType==1 && element.hasChildNodes()) {
            while (element.hasChildNodes())
                pieces.push(element.removeChild(element.firstChild));
            (function childStep() {
                if (pieces.length) {
                    var piece = pieces.shift();
                    animateNode(piece, conf, childStep);
                    element.appendChild(piece);
                } else
                    callback();
            })();
        } else if (element.nodeType==3) {
            pieces = chunk(element.data, conf);
            element.data = "";
            (function addText(){
                element.data += pieces.shift();
                timeout(pieces.length ? addText : callback, conf);
            })();
        } else // empty or special (comment etc) node
            timeout(callback, conf);
    }

})(jQuery, "typewriter");


var $pause       = false;
var $type_effect = false;
var $index       = 0;
var $scrolldist  = 0;
var start_scroll = 15;

$(document).ready( function() {
    process_commands();
});


function process_commands() {
    if ($pause || $index >= commands.length) return;

    var command  = commands[$index][0];
    var arg      = commands[$index][1];
    var textarea = $("div#main");
    var timeout  = 400;
    $index++;

    if (command == "text") {
        //for (var x = 0; x<arg.length; x++) {
            //var line = arg[x];
            var line = arg;
            if ($index >= start_scroll) {
                $scrolldist += 40;
                textarea.scrollTop($scrolldist);
            }

            eline = $("<span>" + line + "</span><br />").hide().appendTo(textarea);
            //console.log(eline);
            if ($type_effect) {
                //eline.typewriter();
                //timeout += line.length * 70;
                eline.show();
            } else {
                eline.show();
            }

            if (line.replace(/ /g, '') == '') $type_effect = false;

        //}
    } else if (command == "pause") {
        timeout = parseInt(arg, 10) * 1000;

    } else if (command == "type") {
        $type_effect = true;
    }

    if ($pause) {
        // avoid skipping scheduled command
        $index--;
        if ($index<0) $index = 0;
    } else {
        setTimeout(process_commands, timeout/4);
    }
}


function toggle_pause() {
    $("button").text($pause ? "Pause" : "Unpause")
    $pause = $pause ? false : true;
    if (!$pause) process_commands();
}

</script>
<style>
    * {
        font-family: Verdana, Arial, Sans-Serif;
        font-size: 14px;
    }

    div#main {
        background:#CCCCCC none repeat scroll 0 0;
        border:3px solid #666666;
        margin:5px;
        padding:5px;
        position:relative;
        width:900px;
        height:550px;
        overflow:auto;
    }

    p {
        padding-bottom: 0;
        margin-bottom: 0;
    }
</style>
      <!-- p { margin:10px;padding:5px;border:2px solid #666; } -->
</head>

<body>
    <button onClick="toggle_pause()">Pause</button>

    <div id="main"></div>
</body>
</html>
